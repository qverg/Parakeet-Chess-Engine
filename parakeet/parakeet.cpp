#include <iostream>
#include "main_header.hpp"

using namespace bitboards;

void populateBitboards();
bitboard generateKingMoves();
bitboard generateKnightMoves();
bitboard generatePawnMoves();

int main() {
    //populateBitboards();
}


void populateBitboards() {
    // King moves
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000000000001")] = bitboard("0000000000000000000000000000000000000000000000000000001100000010");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000000000010")] = bitboard("0000000000000000000000000000000000000000000000000000011100000101");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000000000100")] = bitboard("0000000000000000000000000000000000000000000000000000111000001010");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000000001000")] = bitboard("0000000000000000000000000000000000000000000000000001110000010100");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000000010000")] = bitboard("0000000000000000000000000000000000000000000000000011100000101000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000000100000")] = bitboard("0000000000000000000000000000000000000000000000000111000001010000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000001000000")] = bitboard("0000000000000000000000000000000000000000000000001110000010100000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000010000000")] = bitboard("0000000000000000000000000000000000000000000000001100000001000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000000100000000")] = bitboard("0000000000000000000000000000000000000000000000110000001000000011");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000001000000000")] = bitboard("0000000000000000000000000000000000000000000001110000010100000111");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000010000000000")] = bitboard("0000000000000000000000000000000000000000000011100000101000001110");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000000100000000000")] = bitboard("0000000000000000000000000000000000000000000111000001010000011100");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000001000000000000")] = bitboard("0000000000000000000000000000000000000000001110000010100000111000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000010000000000000")] = bitboard("0000000000000000000000000000000000000000011100000101000001110000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000000100000000000000")] = bitboard("0000000000000000000000000000000000000000111000001010000011100000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000001000000000000000")] = bitboard("0000000000000000000000000000000000000000110000000100000011000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000010000000000000000")] = bitboard("0000000000000000000000000000000000000011000000100000001100000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000000100000000000000000")] = bitboard("0000000000000000000000000000000000000111000001010000011100000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000001000000000000000000")] = bitboard("0000000000000000000000000000000000001110000010100000111000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000010000000000000000000")] = bitboard("0000000000000000000000000000000000011100000101000001110000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000000100000000000000000000")] = bitboard("0000000000000000000000000000000000111000001010000011100000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000001000000000000000000000")] = bitboard("0000000000000000000000000000000001110000010100000111000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000010000000000000000000000")] = bitboard("0000000000000000000000000000000011100000101000001110000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000000100000000000000000000000")] = bitboard("0000000000000000000000000000000011000000010000001100000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000001000000000000000000000000")] = bitboard("0000000000000000000000000000001100000010000000110000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000010000000000000000000000000")] = bitboard("0000000000000000000000000000011100000101000001110000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000000100000000000000000000000000")] = bitboard("0000000000000000000000000000111000001010000011100000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000001000000000000000000000000000")] = bitboard("0000000000000000000000000001110000010100000111000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000010000000000000000000000000000")] = bitboard("0000000000000000000000000011100000101000001110000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000000100000000000000000000000000000")] = bitboard("0000000000000000000000000111000001010000011100000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000001000000000000000000000000000000")] = bitboard("0000000000000000000000001110000010100000111000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000010000000000000000000000000000000")] = bitboard("0000000000000000000000001100000001000000110000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000000100000000000000000000000000000000")] = bitboard("0000000000000000000000110000001000000011000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000001000000000000000000000000000000000")] = bitboard("0000000000000000000001110000010100000111000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000010000000000000000000000000000000000")] = bitboard("0000000000000000000011100000101000001110000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000000100000000000000000000000000000000000")] = bitboard("0000000000000000000111000001010000011100000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000001000000000000000000000000000000000000")] = bitboard("0000000000000000001110000010100000111000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000010000000000000000000000000000000000000")] = bitboard("0000000000000000011100000101000001110000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000000100000000000000000000000000000000000000")] = bitboard("0000000000000000111000001010000011100000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000001000000000000000000000000000000000000000")] = bitboard("0000000000000000110000000100000011000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000010000000000000000000000000000000000000000")] = bitboard("0000000000000011000000100000001100000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000000100000000000000000000000000000000000000000")] = bitboard("0000000000000111000001010000011100000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000001000000000000000000000000000000000000000000")] = bitboard("0000000000001110000010100000111000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000010000000000000000000000000000000000000000000")] = bitboard("0000000000011100000101000001110000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000000100000000000000000000000000000000000000000000")] = bitboard("0000000000111000001010000011100000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000001000000000000000000000000000000000000000000000")] = bitboard("0000000001110000010100000111000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000010000000000000000000000000000000000000000000000")] = bitboard("0000000011100000101000001110000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000000100000000000000000000000000000000000000000000000")] = bitboard("0000000011000000010000001100000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000001000000000000000000000000000000000000000000000000")] = bitboard("0000001100000010000000110000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000010000000000000000000000000000000000000000000000000")] = bitboard("0000011100000101000001110000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000000100000000000000000000000000000000000000000000000000")] = bitboard("0000111000001010000011100000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000001000000000000000000000000000000000000000000000000000")] = bitboard("0001110000010100000111000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000010000000000000000000000000000000000000000000000000000")] = bitboard("0011100000101000001110000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000000100000000000000000000000000000000000000000000000000000")] = bitboard("0111000001010000011100000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000001000000000000000000000000000000000000000000000000000000")] = bitboard("1110000010100000111000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000010000000000000000000000000000000000000000000000000000000")] = bitboard("1100000001000000110000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000000100000000000000000000000000000000000000000000000000000000")] = bitboard("0000001000000011000000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000001000000000000000000000000000000000000000000000000000000000")] = bitboard("0000010100000111000000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000010000000000000000000000000000000000000000000000000000000000")] = bitboard("0000101000001110000000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0000100000000000000000000000000000000000000000000000000000000000")] = bitboard("0001010000011100000000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0001000000000000000000000000000000000000000000000000000000000000")] = bitboard("0010100000111000000000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0010000000000000000000000000000000000000000000000000000000000000")] = bitboard("0101000001110000000000000000000000000000000000000000000000000000");
    kingMoves[bitboard("0100000000000000000000000000000000000000000000000000000000000000")] = bitboard("1010000011100000000000000000000000000000000000000000000000000000");
    kingMoves[bitboard("1000000000000000000000000000000000000000000000000000000000000000")] = bitboard("0100000011000000000000000000000000000000000000000000000000000000");

    // Knight moves
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000000000001")] = bitboard("0000000000000000000000000000000000000000000000100000010000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000000000010")] = bitboard("0000000000000000000000000000000000000000000001010000100000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000000000100")] = bitboard("0000000000000000000000000000000000000000000010100001000100000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000000001000")] = bitboard("0000000000000000000000000000000000000000000101000010001000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000000010000")] = bitboard("0000000000000000000000000000000000000000001010000100010000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000000100000")] = bitboard("0000000000000000000000000000000000000000010100001000100000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000001000000")] = bitboard("0000000000000000000000000000000000000000101000000001000000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000010000000")] = bitboard("0000000000000000000000000000000000000000010000000010000000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000000100000000")] = bitboard("0000000000000000000000000000000000000010000001000000000000000100");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000001000000000")] = bitboard("0000000000000000000000000000000000000101000010000000000000001000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000010000000000")] = bitboard("0000000000000000000000000000000000001010000100010000000000010001");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000000100000000000")] = bitboard("0000000000000000000000000000000000010100001000100000000000100010");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000001000000000000")] = bitboard("0000000000000000000000000000000000101000010001000000000001000100");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000010000000000000")] = bitboard("0000000000000000000000000000000001010000100010000000000010001000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000000100000000000000")] = bitboard("0000000000000000000000000000000010100000000100000000000000010000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000001000000000000000")] = bitboard("0000000000000000000000000000000001000000001000000000000000100000");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000010000000000000000")] = bitboard("0000000000000000000000000000001000000100000000000000010000000010");
    knightMoves[bitboard("0000000000000000000000000000000000000000000000100000000000000000")] = bitboard("0000000000000000000000000000010100001000000000000000100000000101");
    knightMoves[bitboard("0000000000000000000000000000000000000000000001000000000000000000")] = bitboard("0000000000000000000000000000101000010001000000000001000100001010");
    knightMoves[bitboard("0000000000000000000000000000000000000000000010000000000000000000")] = bitboard("0000000000000000000000000001010000100010000000000010001000010100");
    knightMoves[bitboard("0000000000000000000000000000000000000000000100000000000000000000")] = bitboard("0000000000000000000000000010100001000100000000000100010000101000");
    knightMoves[bitboard("0000000000000000000000000000000000000000001000000000000000000000")] = bitboard("0000000000000000000000000101000010001000000000001000100001010000");
    knightMoves[bitboard("0000000000000000000000000000000000000000010000000000000000000000")] = bitboard("0000000000000000000000001010000000010000000000000001000010100000");
    knightMoves[bitboard("0000000000000000000000000000000000000000100000000000000000000000")] = bitboard("0000000000000000000000000100000000100000000000000010000001000000");
    knightMoves[bitboard("0000000000000000000000000000000000000001000000000000000000000000")] = bitboard("0000000000000000000000100000010000000000000001000000001000000000");
    knightMoves[bitboard("0000000000000000000000000000000000000010000000000000000000000000")] = bitboard("0000000000000000000001010000100000000000000010000000010100000000");
    knightMoves[bitboard("0000000000000000000000000000000000000100000000000000000000000000")] = bitboard("0000000000000000000010100001000100000000000100010000101000000000");
    knightMoves[bitboard("0000000000000000000000000000000000001000000000000000000000000000")] = bitboard("0000000000000000000101000010001000000000001000100001010000000000");
    knightMoves[bitboard("0000000000000000000000000000000000010000000000000000000000000000")] = bitboard("0000000000000000001010000100010000000000010001000010100000000000");
    knightMoves[bitboard("0000000000000000000000000000000000100000000000000000000000000000")] = bitboard("0000000000000000010100001000100000000000100010000101000000000000");
    knightMoves[bitboard("0000000000000000000000000000000001000000000000000000000000000000")] = bitboard("0000000000000000101000000001000000000000000100001010000000000000");
    knightMoves[bitboard("0000000000000000000000000000000010000000000000000000000000000000")] = bitboard("0000000000000000010000000010000000000000001000000100000000000000");
    knightMoves[bitboard("0000000000000000000000000000000100000000000000000000000000000000")] = bitboard("0000000000000010000001000000000000000100000000100000000000000000");
    knightMoves[bitboard("0000000000000000000000000000001000000000000000000000000000000000")] = bitboard("0000000000000101000010000000000000001000000001010000000000000000");
    knightMoves[bitboard("0000000000000000000000000000010000000000000000000000000000000000")] = bitboard("0000000000001010000100010000000000010001000010100000000000000000");
    knightMoves[bitboard("0000000000000000000000000000100000000000000000000000000000000000")] = bitboard("0000000000010100001000100000000000100010000101000000000000000000");
    knightMoves[bitboard("0000000000000000000000000001000000000000000000000000000000000000")] = bitboard("0000000000101000010001000000000001000100001010000000000000000000");
    knightMoves[bitboard("0000000000000000000000000010000000000000000000000000000000000000")] = bitboard("0000000001010000100010000000000010001000010100000000000000000000");
    knightMoves[bitboard("0000000000000000000000000100000000000000000000000000000000000000")] = bitboard("0000000010100000000100000000000000010000101000000000000000000000");
    knightMoves[bitboard("0000000000000000000000001000000000000000000000000000000000000000")] = bitboard("0000000001000000001000000000000000100000010000000000000000000000");
    knightMoves[bitboard("0000000000000000000000010000000000000000000000000000000000000000")] = bitboard("0000001000000100000000000000010000000010000000000000000000000000");
    knightMoves[bitboard("0000000000000000000000100000000000000000000000000000000000000000")] = bitboard("0000010100001000000000000000100000000101000000000000000000000000");
    knightMoves[bitboard("0000000000000000000001000000000000000000000000000000000000000000")] = bitboard("0000101000010001000000000001000100001010000000000000000000000000");
    knightMoves[bitboard("0000000000000000000010000000000000000000000000000000000000000000")] = bitboard("0001010000100010000000000010001000010100000000000000000000000000");
    knightMoves[bitboard("0000000000000000000100000000000000000000000000000000000000000000")] = bitboard("0010100001000100000000000100010000101000000000000000000000000000");
    knightMoves[bitboard("0000000000000000001000000000000000000000000000000000000000000000")] = bitboard("0101000010001000000000001000100001010000000000000000000000000000");
    knightMoves[bitboard("0000000000000000010000000000000000000000000000000000000000000000")] = bitboard("1010000000010000000000000001000010100000000000000000000000000000");
    knightMoves[bitboard("0000000000000000100000000000000000000000000000000000000000000000")] = bitboard("0100000000100000000000000010000001000000000000000000000000000000");
    knightMoves[bitboard("0000000000000001000000000000000000000000000000000000000000000000")] = bitboard("0000010000000000000001000000001000000000000000000000000000000000");
    knightMoves[bitboard("0000000000000010000000000000000000000000000000000000000000000000")] = bitboard("0000100000000000000010000000010100000000000000000000000000000000");
    knightMoves[bitboard("0000000000000100000000000000000000000000000000000000000000000000")] = bitboard("0001000100000000000100010000101000000000000000000000000000000000");
    knightMoves[bitboard("0000000000001000000000000000000000000000000000000000000000000000")] = bitboard("0010001000000000001000100001010000000000000000000000000000000000");
    knightMoves[bitboard("0000000000010000000000000000000000000000000000000000000000000000")] = bitboard("0100010000000000010001000010100000000000000000000000000000000000");
    knightMoves[bitboard("0000000000100000000000000000000000000000000000000000000000000000")] = bitboard("1000100000000000100010000101000000000000000000000000000000000000");
    knightMoves[bitboard("0000000001000000000000000000000000000000000000000000000000000000")] = bitboard("0001000000000000000100001010000000000000000000000000000000000000");
    knightMoves[bitboard("0000000010000000000000000000000000000000000000000000000000000000")] = bitboard("0010000000000000001000000100000000000000000000000000000000000000");
    knightMoves[bitboard("0000000100000000000000000000000000000000000000000000000000000000")] = bitboard("0000000000000100000000100000000000000000000000000000000000000000");
    knightMoves[bitboard("0000001000000000000000000000000000000000000000000000000000000000")] = bitboard("0000000000001000000001010000000000000000000000000000000000000000");
    knightMoves[bitboard("0000010000000000000000000000000000000000000000000000000000000000")] = bitboard("0000000000010001000010100000000000000000000000000000000000000000");
    knightMoves[bitboard("0000100000000000000000000000000000000000000000000000000000000000")] = bitboard("0000000000100010000101000000000000000000000000000000000000000000");
    knightMoves[bitboard("0001000000000000000000000000000000000000000000000000000000000000")] = bitboard("0000000001000100001010000000000000000000000000000000000000000000");
    knightMoves[bitboard("0010000000000000000000000000000000000000000000000000000000000000")] = bitboard("0000000010001000010100000000000000000000000000000000000000000000");
    knightMoves[bitboard("0100000000000000000000000000000000000000000000000000000000000000")] = bitboard("0000000000010000101000000000000000000000000000000000000000000000");
    knightMoves[bitboard("1000000000000000000000000000000000000000000000000000000000000000")] = bitboard("0000000000100000010000000000000000000000000000000000000000000000");
}

bitboard generateKingMoves(bitboard kingLocation, bitboard sameColourPieces) {
    return (kingMoves[kingLocation] & (~sameColourPieces));
}

bitboard generateKnightMoves(bitboard knightLocation, bitboard sameColourPieces) {
    return (kingMoves[knightLocation] & (~sameColourPieces));
}

bitboard generatePawnMoves(bitboard pawnLocations, int colour, bitboard sameColourPieces, bitboard oppositeColourPieces) {
    // for en passant: include 'en passant' square as location of an enemy piece
    bitboard occupiedSquares = (sameColourPieces|oppositeColourPieces);
    if (colour == BLACK) {
        bitboard shiftedForward = pawnLocations >> 8;
        bitboard forward1 = shiftedForward & (~occupiedSquares);
        bitboard forward2 = ((forward1 & rank6) >> 8) & (~occupiedSquares);
        bitboard captures = ((shiftedForward << 1) | (shiftedForward >> 1)) & oppositeColourPieces;
        return forward1|forward2|captures;
    } else if (colour == WHITE) {
        bitboard shiftedForward = pawnLocations << 8;
        bitboard forward1 = shiftedForward & (~occupiedSquares);
        bitboard forward2 = ((forward1 & rank3) << 8) & (~occupiedSquares);
        bitboard captures = (shiftedForward << 1) | (shiftedForward >> 1) & oppositeColourPieces;
        return forward1|forward2|captures;
    }
}